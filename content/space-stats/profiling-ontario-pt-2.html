---
title: " Making Sense of the Census, 2006 - 2011"
description: "Part 2: Tidy and Wrangle"
author: "Corey Pembleton"
date: "6/24/2018"
output:
  blogdown::html_page:
    toc: true

---

<script src="/rmarkdown-libs/kePrint/kePrint.js"></script>

<div id="TOC">
<ul>
<li><a href="#purpose">Purpose</a><ul>
<li><a href="#canadian-census-descriptions">Canadian Census Descriptions</a></li>
</ul></li>
<li><a href="#tidying">Tidying</a></li>
</ul>
</div>

<p>Reading Time: 3 minutes</p>
<div id="purpose" class="section level2">
<h2>Purpose</h2>
<p>Before I perform any data tidying, processing and manipulation, I always keep the purpose of the analysis in the front of my mind. For this project, the main purpose is to create a dataset which:</p>
<ul>
<li>Combines the 2006 and 2011 census tables of each respective socio-economic component</li>
<li>Reduces redundancy</li>
<li>Follows the dictums of the tidy data principles</li>
</ul>
<div id="canadian-census-descriptions" class="section level3">
<h3>Canadian Census Descriptions</h3>
<p>A good place to start, is by getting to know the data, inside and out, and a good question when working with any census data is knowing the unit which is best suited to the analysis.</p>
<p>The Canadian census is divided into <a href="https://www150.statcan.gc.ca/n1/pub/92-195-x/2011001/other-autre/hierarch/h-eng.htm">four census geographic units</a>, from the top-down: Provinces and Territories, Census Divisions, Census Subdivisions (roughly a municipality), and Dissimination Areas (population of 400-700). There are also <em>specially-defined geographic units</em>, which include census metropolitan areas (areas with an urban core of at least 100,000), census agglomerations (population between 10,000-100,000), Census Tracts (CT) (population between 2,500 and 8,000, only in areas with a population greater than 50,000) population centres, designated places, and localities (fig. 1). All of these units connect with common keys, and hence are excellent for use in relational database management systems (RDBMS), and for practicing working with them.</p>
<div class="figure">
<img src="/img/census-profile1.jpg" alt="Hierarchy of standard geographic units for dissemination, 2011 Census" />
<p class="caption">Hierarchy of standard geographic units for dissemination, 2011 Census</p>
</div>
<p>In total, I have assembled 13 census tables derived from shapefiles, 7 from 2006 and 6 from 2011. Both table sets contain descriptive information, such as census identifier fields and the specific variables relevent to their topic (Table 1).</p>
<div style="border: 1px solid #ddd; padding: 5px; overflow-y: scroll; height:300px; overflow-x: scroll; width:100%; ">
<table class="table table-striped table-hover table-condensed table-responsive" style="margin-left: auto; margin-right: auto;">
<caption>
<span id="tab:unnamed-chunk-2">Table 1: </span>2006 and 2011 Census Data Descriptions According to Data Dictionary
</caption>
<thead>
<tr>
<th style="text-align:left;">
Table
</th>
<th style="text-align:left;">
Description
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
2011 Age and Income
</td>
<td style="text-align:left;">
Total population in CTs across Canada and income levels
</td>
</tr>
<tr>
<td style="text-align:left;">
2011 Education and Labour
</td>
<td style="text-align:left;">
Level of education in CTs, disaggregated by education level, employment status and labour type
</td>
</tr>
<tr>
<td style="text-align:left;">
2011 Immigration
</td>
<td style="text-align:left;">
Immigration and Ethnic Diversity, including generational information
</td>
</tr>
<tr>
<td style="text-align:left;">
2011 Language
</td>
<td style="text-align:left;">
All language spoken in households
</td>
</tr>
<tr>
<td style="text-align:left;">
2011 Marriage, Family, and Household
</td>
<td style="text-align:left;">
Marriage, dwelling, and housing type and status
</td>
</tr>
<tr>
<td style="text-align:left;">
2011 Mobility
</td>
<td style="text-align:left;">
Mobility status disaggregated by migration and moving status
</td>
</tr>
<tr>
<td style="text-align:left;">
2006 Age
</td>
<td style="text-align:left;">
Total population in CTs across Canada and income levels
</td>
</tr>
<tr>
<td style="text-align:left;">
2006 Education
</td>
<td style="text-align:left;">
Level of education in CTs, disaggregated by education level
</td>
</tr>
<tr>
<td style="text-align:left;">
2006 Ethnicity
</td>
<td style="text-align:left;">
Disaggregated population statistics on level of education
</td>
</tr>
<tr>
<td style="text-align:left;">
2006 First Nations
</td>
<td style="text-align:left;">
Immigration and Ethnic Diversity, including generational information
</td>
</tr>
<tr>
<td style="text-align:left;">
2006 Immigration
</td>
<td style="text-align:left;">
Total population, disaggregated by Aboriginal Identity
</td>
</tr>
<tr>
<td style="text-align:left;">
2006 Income
</td>
<td style="text-align:left;">
Income levels, by gender, median and mean calculations
</td>
</tr>
<tr>
<td style="text-align:left;">
2006 Marriage, Family and Household
</td>
<td style="text-align:left;">
2006 Marriage, dwelling, and housing type and status
</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div id="tidying" class="section level2">
<h2>Tidying</h2>
<p>Now that we know what the data consists of, we can start processing, starting with tidying up the data. While the data is impressively detailed, it is also TOO detailed for what our database will require. For example, there are 513 variables in a single dataset :</p>
<pre class="r"><code>head(CAN_06_INC, 3)</code></pre>
<pre><code>## # A tibble: 3 x 513
##   CTUID      CMAUID PRUID CT_UID     OID_ GEOGRAPHY POPULATION POPULATIO1
##   &lt;chr&gt;      &lt;chr&gt;  &lt;int&gt; &lt;chr&gt;     &lt;int&gt; &lt;chr&gt;          &lt;dbl&gt;      &lt;dbl&gt;
## 1 0010001.00 001       10 001000100     0 001000100       2162       2004
## 2 0010002.00 001       10 001000200     1 001000200       5081       4942
## 3 0010003.01 001       10 001000301     2 001000301       4843       4586
## # ... with 505 more variables: POPULATI2 &lt;dbl&gt;, LAND_AREA_ &lt;dbl&gt;,
## #   TOTAL_POPU &lt;dbl&gt;, MALE_TOTAL &lt;dbl&gt;, FEMALE_TOT &lt;dbl&gt;,
## #   TOTAL_INCO &lt;dbl&gt;, WITHOUT_IN &lt;int&gt;, WITH_INCOM &lt;dbl&gt;,
## #   UNDER_1_00 &lt;int&gt;, X1_000_TO_2 &lt;int&gt;, X3_000_TO_4 &lt;int&gt;,
## #   X5_000_TO_6 &lt;int&gt;, X7_000_TO_9 &lt;int&gt;, X10_000_TO_ &lt;int&gt;,
## #   X12_000_TO_ &lt;int&gt;, X15_000_TO_ &lt;int&gt;, X20_000_TO_ &lt;int&gt;,
## #   X25_000_TO_ &lt;int&gt;, X30_000_TO_ &lt;int&gt;, X35_000_TO_ &lt;int&gt;,
## #   X40_000_TO_ &lt;int&gt;, X45_000_TO_ &lt;int&gt;, X50_000_TO_ &lt;int&gt;,
## #   X60_000_AND &lt;int&gt;, MEDIAN_INC &lt;dbl&gt;, AVERAGE_IN &lt;dbl&gt;,
## #   STANDARD_E &lt;int&gt;, TOTAL_INC1 &lt;dbl&gt;, WITHOUT_I1 &lt;int&gt;,
## #   WITH_INCO1 &lt;dbl&gt;, UNDER_1_01 &lt;int&gt;, X1_000_TO_1 &lt;int&gt;,
## #   X3_000_TO_1 &lt;int&gt;, X5_000_TO_1 &lt;int&gt;, X7_000_TO_1 &lt;int&gt;,
## #   X10_000_TO1 &lt;int&gt;, X12_000_TO1 &lt;int&gt;, X15_000_TO1 &lt;int&gt;,
## #   X20_000_TO1 &lt;int&gt;, X25_000_TO1 &lt;int&gt;, X30_000_TO1 &lt;int&gt;,
## #   X35_000_TO1 &lt;int&gt;, X40_000_TO1 &lt;int&gt;, X45_000_TO1 &lt;int&gt;,
## #   X50_000_TO1 &lt;int&gt;, X60_000_AN1 &lt;int&gt;, MEDIAN_IN1 &lt;dbl&gt;,
## #   AVERAGE_I1 &lt;dbl&gt;, STANDARD_1 &lt;int&gt;, TOTAL_IN2 &lt;dbl&gt;, WITHOUT_2 &lt;int&gt;,
## #   WITH_INC2 &lt;dbl&gt;, UNDER_1_2 &lt;int&gt;, X1_000_TO2 &lt;int&gt;, X3_000_TO2 &lt;int&gt;,
## #   X5_000_TO2 &lt;int&gt;, X7_000_TO2 &lt;int&gt;, X10_000_T2 &lt;int&gt;,
## #   X12_000_T2 &lt;int&gt;, X15_000_T2 &lt;int&gt;, X20_000_T2 &lt;int&gt;,
## #   X25_000_T2 &lt;int&gt;, X30_000_T2 &lt;int&gt;, X35_000_T2 &lt;int&gt;,
## #   X40_000_T2 &lt;int&gt;, X45_000_T2 &lt;int&gt;, X50_000_T2 &lt;int&gt;,
## #   X60_000_A2 &lt;int&gt;, MEDIAN_I2 &lt;dbl&gt;, AVERAGE_2 &lt;int&gt;, STANDARD2 &lt;int&gt;,
## #   TOTAL_AFTE &lt;dbl&gt;, WITHOUT_AF &lt;int&gt;, WITH_AFTER &lt;dbl&gt;, UNDER_1_3 &lt;int&gt;,
## #   X1_000_TO3 &lt;int&gt;, X3_000_TO3 &lt;int&gt;, X5_000_TO3 &lt;int&gt;,
## #   X7_000_TO3 &lt;int&gt;, X10_000_T3 &lt;int&gt;, X12_000_T3 &lt;int&gt;,
## #   X15_000_T3 &lt;int&gt;, X20_000_T3 &lt;int&gt;, X25_000_T3 &lt;int&gt;,
## #   X30_000_T3 &lt;int&gt;, X35_000_T3 &lt;int&gt;, X40_000_T3 &lt;int&gt;,
## #   X45_000_T3 &lt;int&gt;, X50_000_AND &lt;int&gt;, MEDIAN_AFT &lt;dbl&gt;,
## #   AVERAGE_AF &lt;int&gt;, STANDARD3 &lt;dbl&gt;, AFTER_TAX_ &lt;dbl&gt;, WITHOUT_A1 &lt;int&gt;,
## #   WITH_AFTE1 &lt;dbl&gt;, UNDER_1_4 &lt;int&gt;, X1_000_TO4 &lt;int&gt;, X3_000_TO4 &lt;int&gt;,
## #   X5_000_TO4 &lt;int&gt;, X7_000_TO4 &lt;int&gt;, ...</code></pre>
</div>
